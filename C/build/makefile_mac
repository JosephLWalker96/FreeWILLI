#Use -I to tell the compiler where to find third-party or project-specific header files.
#Use -L to tell the linker where to find third-party or project-specific libraries during the linking phase.

# Compiler and flags
CXX = g++
CXXFLAGS = -std=c++20 -mcpu=apple-m1 -O3 -flto=auto

#LIBS = -larmadillo -lopenblas -llapack -lliquid -lfftw3   
LIBS = -llapack -lfftw3

#INCLUDES = -I/usr/local/include/sigpack-1.2.7/sigpack  # Adjust include path for macOS
INCLUDES = -I/opt/homebrew/Cellar/openblas/0.3.27/include/ -I/opt/homebrew/Cellar/liquid-dsp/1.6.0/include -I/opt/homebrew/Cellar/googletest/1.14.0/include/  -I/opt/homebrew/Cellar/eigen/3.4.0_1/include/ -I/usr/local/bin/sigpack-1.2.7/sigpack #-I/opt/homebrew/opt/fftw/include/

# Directories 
SRC_DIR := ../src
OBJ_DIR := ../src

# Source files
SRCS := $(wildcard $(SRC_DIR)/*.cpp)

# Object files
OBJS := $(SRCS:$(SRC_DIR)/%.cpp=$(OBJ_DIR)/%.o)

# Target executable
TARGET := listen_mac

#Make all targets by default
all: $(TARGET)

# Linking target executable
$(TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) $(OBJS) -o $(TARGET) $(LIBS)

# Compile source files
%.o: %.cpp
	$(CXX) $(CXXFLAGS) $(INCLUDES) -c $< -o $@

# Clean rule
clean:
	rm -f $(OBJS) $(TARGET)


# PHONY targets to prevent conflicts with file names
.PHONY: all clean
